<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>心靈釋放 - 統計分析</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Philosopher:wght@400;700&family=Noto+Serif+HK:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-primary: #825D65;
            --color-bg: #FCFAF6;
            --color-accent: #F2EFE8;
            --color-text: #4B5563;
            --color-text-secondary: #4B5563;
            --color-brown: #40372F;
            --color-brown-light: #736558;
        }

        body {
            background-color: var(--color-bg);
            font-family: 'Noto Serif HK', serif;
            color: var(--color-text);
        }

        .complete-header {
            background: linear-gradient(161deg, #F5F1ED 0%, #E9CCBE 100%);
            border-bottom-left-radius: 24px;
            border-bottom-right-radius: 24px;
            box-shadow: 0px 4px 6px -2px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }

        .ink-line {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 100'%3E%3Cpath d='M0,50 Q250,0 500,50 T1000,50' fill='none' stroke='black' stroke-width='1'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-size: cover;
            opacity: 0.1;
            pointer-events: none;
            top: 0;
            left: 0;
            z-index: 1;
        }

        .tab-item {
            transition: all 0.3s ease;
            position: relative;
            color: var(--color-text-secondary);
        }

        .tab-item.active {
            color: var(--color-primary);
            font-weight: 600;
        }

        .tab-item.active::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 25%;
            width: 50%;
            height: 3px;
            background-color: var(--color-primary);
            border-radius: 3px;
        }

        .chart-card {
            animation: fadeIn 0.5s ease-out;
            transition: all 0.3s ease;
            background: white;
            border-radius: 16px;
            box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .chart-card:hover {
            transform: translateY(-2px);
            box-shadow: 0px 8px 16px -4px rgba(0, 0, 0, 0.1);
        }

        .encouragement-banner {
            background: linear-gradient(161deg, #F5F1ED 0%, #E9CCBE 100%);
            border-radius: 16px;
            color: var(--color-brown);
            animation: fadeIn 0.8s ease;
            box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .summary-item {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            background: var(--color-accent);
            border-radius: 16px;
            padding: 16px;
            text-align: center;
        }

        .summary-item:hover {
            transform: translateY(-2px);
            box-shadow: 0px 8px 16px -4px rgba(0, 0, 0, 0.1);
        }

        .summary-item h3 {
            color: var(--color-primary);
        }

        .emotional-bar {
            position: relative;
            height: 32px;
            border-radius: 16px;
            margin-bottom: 12px;
            background: var(--color-accent);
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }

        .emotional-bar .bar-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            border-radius: 16px;
            transition: width 1.5s ease;
            background: var(--color-primary);
        }

        .emotional-bar .bar-label {
            position: absolute;
            left: 12px;
            top: 0;
            height: 100%;
            display: flex;
            align-items: center;
            color: white;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
            z-index: 10;
        }

        .emotional-bar .bar-value {
            position: absolute;
            right: 12px;
            top: 0;
            height: 100%;
            display: flex;
            align-items: center;
            color: white;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
            z-index: 10;
        }

        .correlation-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .correlation-option {
            padding: 8px 16px;
            border-radius: 9999px;
            font-size: 14px;
            transition: all 0.3s ease;
            border: 1px solid var(--color-accent);
            color: var(--color-text);
            background: white;
        }

        .correlation-option.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .chart-tooltip {
            color: var(--color-text-secondary);
            cursor: pointer;
        }

        .insight-badge {
            position: absolute;
            top: -8px;
            left: -8px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--color-primary);
            color: white;
            font-size: 10px;
            border: 2px solid white;
            z-index: 2;
        }

        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        .page-enter {
            animation: fadeIn 0.3s ease-out;
        }
        
        main {
            padding-bottom: calc(env(safe-area-inset-bottom) + 5rem);
        }

        .auto-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .main-title {
            font-family: "Philosopher", serif;
            font-size: 60px;
            font-weight: 400;
            line-height: 60px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--color-primary);
            text-align: center;
            margin-bottom: 24px;
        }

        .hero-title {
            color: var(--color-primary);
            font-size: 24px;
            font-family: 'Noto Serif HK', serif;
            font-weight: 700;
            line-height: 32px;
        }

        .hero-subtitle {
            color: var(--color-primary);
            font-size: 16px;
            font-family: 'Noto Serif HK', serif;
            font-weight: 400;
            line-height: 24px;
        }

        .container-custom {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .page-title-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 2rem;
        }

        .page-title-container::before,
        .page-title-container::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 60px;
            height: 2px;
            background: var(--color-primary);
            opacity: 0.3;
        }

        .page-title-container::before {
            right: calc(50% + 100px);
        }

        .page-title-container::after {
            left: calc(50% + 100px);
        }
        @media (max-width: 640px) {
            .container-custom {
                padding: 0 16px;
            }
            .main-title {
                font-size: 40px;
                line-height: 44px;
            }
        }

    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <main class="min-h-screen page-enter">
        <!-- 頂部標題 -->
        <section class="complete-header px-6 pt-12 pb-8 relative">
            <div class="ink-line"></div>
            <div class="container-custom">
                <h1 class="main-title">Statistics</h1>
                <div class="flex justify-between items-center mb-4">
                    <h2 class="hero-title">情緒統計</h2>
                    <a href="home.html" class="bg-white bg-opacity-30 p-2 rounded-full">
                        <i class="fas fa-arrow-left" style="color: var(--color-brown);"></i>
                    </a>
                </div>
                <p class="hero-subtitle">了解你的情緒模式與成長歷程</p>
            </div>
        </section>
        <!-- 時間篩選標籤 -->
        <section class="px-5 mt-6">
            <div class="bg-white rounded-xl p-3 shadow-md flex justify-between items-center">
                <button class="tab-item active px-4 py-2 text-sm">
                    過去7天
                </button>
                <button class="tab-item px-4 py-2 text-sm">
                    本月
                </button>
                <button class="tab-item px-4 py-2 text-sm">
                    全部
                </button>
                <button class="tab-item px-4 py-2 text-sm">
                    <i class="fas fa-calendar-alt mr-1"></i> 自訂
                </button>
            </div>
        </section>
        
        <!-- 鼓勵橫幅 -->
        <section class="px-5 mt-6">
            <div class="encouragement-banner p-4">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="font-medium">你已釋放了 22 次情緒</p>
                        <p class="text-sm opacity-80">這個月比上個月增加了 8 次</p>
                    </div>
                    <div class="text-3xl">✨</div>
                </div>
            </div>
        </section>
        
        <!-- 本月統計摘要 -->
        <section class="px-5 mt-6">
            <div class="chart-card p-5">
                <h2 class="text-lg font-semibold mb-4" style="color: var(--color-brown);">🌟 本月總覽</h2>
                <div class="auto-grid">
                    <div class="summary-item">
                        <h3 class="text-2xl font-bold">16</h3>
                        <p class="text-xs" style="color: var(--color-text-secondary);">日常釋放次數</p>
                    </div>
                    <div class="summary-item">
                        <h3 class="text-2xl font-bold">6</h3>
                        <p class="text-xs" style="color: var(--color-text-secondary);">深層療癒次數</p>
                    </div>
                    <div class="summary-item">
                        <h3 class="text-2xl font-bold">8</h3>
                        <p class="text-xs" style="color: var(--color-text-secondary);">已釋放情緒種類</p>
                    </div>
                </div>
                <div class="mt-3 text-sm" style="color: var(--color-text-secondary);">
                    <div class="flex justify-between items-center">
                        <span>最常釋放情緒：</span>
                        <span style="color: var(--color-primary);" class="font-medium">恐懼、悲傷</span>
                    </div>
                    <div class="flex justify-between items-center mt-1">
                        <span>最常見主題：</span>
                        <span style="color: var(--color-primary);" class="font-medium">自我價值</span>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 情緒柱狀圖 -->
        <section class="px-5 mt-6">
            <div class="chart-card p-5 relative">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold" style="color: var(--color-brown);">📊 常釋放情緒排行</h2>
                    <span class="chart-tooltip">
                        <i class="fas fa-info-circle"></i>
                    </span>
                </div>
                
                <div>
                    <div class="emotional-bar">
                        <div class="bar-fill" style="width: 0%;"></div>
                        <div class="bar-label">恐懼</div>
                        <div class="bar-value">85%</div>
                    </div>
                    
                    <div class="emotional-bar">
                        <div class="bar-fill" style="width: 0%;"></div>
                        <div class="bar-label">悲傷</div>
                        <div class="bar-value">68%</div>
                    </div>
                    
                    <div class="emotional-bar">
                        <div class="bar-fill" style="width: 0%;"></div>
                        <div class="bar-label">憤怒</div>
                        <div class="bar-value">42%</div>
                    </div>
                    
                    <div class="emotional-bar">
                        <div class="bar-fill" style="width: 0%;"></div>
                        <div class="bar-label">羞愧</div>
                        <div class="bar-value">35%</div>
                    </div>
                    
                    <div class="emotional-bar">
                        <div class="bar-fill" style="width: 0%;"></div>
                        <div class="bar-label">內疚</div>
                        <div class="bar-value">21%</div>
                    </div>
                </div>
                
                <p class="text-xs mt-3" style="color: var(--color-text-secondary);">
                    <i class="fas fa-lightbulb text-yellow-500 mr-1"></i>
                    點擊情緒名稱可查看相關主題和釋放模式
                </p>
            </div>
        </section>
        
        <!-- 主題圓餅圖 -->
        <section class="px-5 mt-6">
            <div class="chart-card p-5 relative">
                <div class="insight-badge">
                    <i class="fas fa-crown"></i>
                </div>
                
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold" style="color: var(--color-brown);">🍀 主題釋放分布</h2>
                    <span class="chart-tooltip">
                        <i class="fas fa-info-circle"></i>
                    </span>
                </div>
                
                <div>
                    <canvas id="themePieChart" height="200"></canvas>
                </div>
                
                <p class="text-xs mt-3" style="color: var(--color-text-secondary);">
                    <i class="fas fa-lightbulb text-yellow-500 mr-1"></i>
                    你在「自我價值」主題釋放最多，可能需要更多自我關愛
                </p>
            </div>
        </section>
        
        <!-- 動物力量雷達圖 -->
        <section class="px-5 mt-6">
            <div class="chart-card p-5">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold" style="color: var(--color-brown);">🐾 動物力量分布</h2>
                    <span class="chart-tooltip">
                        <i class="fas fa-info-circle"></i>
                    </span>
                </div>
                
                <div class="correlation-selector">
                    <button class="correlation-option active">
                        動物力量分析
                    </button>
                    <button class="correlation-option">
                        情緒與動物關聯
                    </button>
                </div>
                
                <div>
                    <canvas id="powerRadarChart" height="250"></canvas>
                </div>
                
                <p class="text-xs mt-3" style="color: var(--color-text-secondary);">
                    <i class="fas fa-lightbulb text-yellow-500 mr-1"></i>
                    你的「勇氣」和「清晰度」提升最明顯，「穩定」還可加強
                </p>
            </div>
        </section>
        
        <!-- 每週釋放趨勢圖 -->
        <section class="px-5 mt-6 mb-8">
            <div class="chart-card p-5">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold" style="color: var(--color-brown);">📅 每週釋放趨勢</h2>
                    <span class="chart-tooltip">
                        <i class="fas fa-info-circle"></i>
                    </span>
                </div>
                
                <div>
                    <canvas id="weeklyTrendChart" height="200"></canvas>
                </div>
                
                <div class="flex justify-between text-xs mt-4" style="color: var(--color-text-secondary);">
                    <div class="flex items-center">
                        <span class="w-3 h-3 rounded-full mr-1" style="background: var(--color-primary);"></span>
                        <span>日常釋放</span>
                    </div>
                    <div class="flex items-center">
                        <span class="w-3 h-3 rounded-full mr-1" style="background: var(--color-accent);"></span>
                        <span>深層療癒</span>
                    </div>
                    <div class="text-center">
                        <span class="font-medium" style="color: var(--color-primary);">
                            <i class="fas fa-arrow-trend-up mr-1"></i> 
                            持續成長中
                        </span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 導航欄容器 -->
    <div id="navbar-container"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 時間篩選標籤切換
            const tabItems = document.querySelectorAll('.tab-item');
            tabItems.forEach(tab => {
                tab.addEventListener('click', function() {
                    tabItems.forEach(t => {
                        t.classList.remove('active');
                        t.classList.add('text-gray-500');
                    });
                    this.classList.add('active');
                    this.classList.remove('text-gray-500');
                });
            });
            
            // 關聯模式切換
            const correlationOptions = document.querySelectorAll('.correlation-option');
            correlationOptions.forEach(option => {
                option.addEventListener('click', function() {
                    correlationOptions.forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // 動畫加載情緒柱狀圖
            setTimeout(() => {
                const barFills = document.querySelectorAll('.bar-fill');
                barFills[0].style.width = '85%';
                setTimeout(() => barFills[1].style.width = '68%', 200);
                setTimeout(() => barFills[2].style.width = '42%', 400);
                setTimeout(() => barFills[3].style.width = '35%', 600);
                setTimeout(() => barFills[4].style.width = '21%', 800);
            }, 500);
            
            // 主題圓餅圖
            const themePieChart = document.getElementById('themePieChart').getContext('2d');
            new Chart(themePieChart, {
                type: 'doughnut',
                data: {
                    labels: ['自我價值', '愛與關係', '金錢與豐盛', '身體連結', '家庭關係'],
                    datasets: [{
                        data: [35, 25, 15, 14, 11],
                        backgroundColor: [
                            '#F6C8BE',
                            '#B8D8D8',
                            '#D7C1E0',
                            '#BFD8BD',
                            '#F4EDCC'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    cutout: '65%',
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                font: {
                                    size: 11
                                },
                                padding: 15
                            }
                        }
                    }
                }
            });
            
            // 動物力量雷達圖
            const powerRadarChart = document.getElementById('powerRadarChart').getContext('2d');
            new Chart(powerRadarChart, {
                type: 'radar',
                data: {
                    labels: ['勇氣', '清晰度', '智慧', '柔軟', '穩定', '創造力', '覺察'],
                    datasets: [{
                        label: '動物力量強度',
                        data: [85, 76, 65, 58, 45, 72, 60],
                        fill: true,
                        backgroundColor: 'rgba(130, 93, 101, 0.2)',
                        borderColor: 'rgba(130, 93, 101, 0.8)',
                        pointBackgroundColor: '#825D65',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#825D65'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: {
                                color: 'rgba(0, 0, 0, 0.05)',
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)',
                            },
                            pointLabels: {
                                font: {
                                    size: 11
                                }
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // 每週釋放趨勢折線圖
            const weeklyTrendChart = document.getElementById('weeklyTrendChart').getContext('2d');
            new Chart(weeklyTrendChart, {
                type: 'line',
                data: {
                    labels: ['第1週', '第2週', '第3週', '本週'],
                    datasets: [
                        {
                            label: '日常釋放',
                            data: [3, 5, 4, 6],
                            borderColor: '#825D65',
                            backgroundColor: 'rgba(130, 93, 101, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: '深層療癒',
                            data: [1, 2, 1, 2],
                            borderColor: '#F2EFE8',
                            backgroundColor: 'rgba(242, 239, 232, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        });

        // 載入導航欄
        fetch('../components/navbar.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('navbar-container').innerHTML = html;
            })
            .catch(error => {
                console.error('無法載入導航欄:', error);
            });
    </script>
</body>
</html> 